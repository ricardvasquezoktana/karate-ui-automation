'use strict';var h,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a},ba=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");},ca=ba(this),da=function(a,b){if(b)a:{var c=ca;a=a.split(".");
for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}},k=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})};
da("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});da("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&c.push([d,b[d]]);return c}});/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var l=this||self,m=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b},ea=function(a,b,c){return a.call.apply(a.bind,arguments)},fa=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}},p=function(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?
ea:fa;return p.apply(null,arguments)},q=function(a,b){function c(){}c.prototype=b.prototype;a.U=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ba=function(d,e,f){for(var g=Array(arguments.length-2),n=2;n<arguments.length;n++)g[n-2]=arguments[n];return b.prototype[e].apply(d,g)}};var ka=function(a){switch(a){case r.name:return r;case t.name:return t;case u.name:return u;case ha.name:return ha;case ia.name:return ia;default:let b=ja.get(a);b||(b=new v(a),ja.set(a,b));return b}},v=class{constructor(a){this.name=a}toString(){return this.name}},ja=new Map,r=new v("async"),t=new v("generic"),u=new v("runtime"),ha=new v("system"),ia=new v("crypto"),w=class extends Error{constructor(a,b,c){super(c);this.code=a;this.category=b;Object.setPrototypeOf(this,new.target.prototype)}toString(){return`${this.category}:${this.code} (${this.message||
"Undefined error."})`}};var la=class{constructor(){let a=void 0,b=void 0;this.promise=new Promise((c,d)=>{a=c;b=d});this.resolve=a;this.reject=b}},x=class extends w{constructor(a,b="One or more errors occurred."){super(1,r,b);this.errors=a;Object.setPrototypeOf(this,new.target.prototype)}flatten(){const a=[],b=[this.errors.slice(0)];for(;0!==b.length;){const c=b[0];for(;0!==c.length;){const d=c.shift();if(d instanceof x){b.unshift(d.errors.slice(0));break}else a.push(d)}b[0]===c&&b.shift()}return new x(a,this.message)}};var y=class{constructor(){this.j=[]}subscribe(a){this.j.push(a)}unsubscribe(a){a=this.j.indexOf(a);if(-1===a)return!1;this.j.splice(a,1);return!0}publish(a){const b=[],c=this.j.slice(0);for(const d of c)b.push(d(a));return b}};const ma=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(let c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var z=function(){this.oa=Date.now()},A=null;z.prototype.set=function(a){this.oa=a};z.prototype.reset=function(){this.set(Date.now())};z.prototype.get=function(){return this.oa};var B=class{constructor(a,b){this.name=a;this.value=b}toString(){return this.name}},C=new B("OFF",Infinity),D=new B("SEVERE",1E3),E=new B("WARNING",900),na=new B("INFO",800),F=new B("CONFIG",700),oa=new B("ALL",0),pa=[C,new B("SHOUT",1200),D,E,na,F,new B("FINE",500),new B("FINER",400),new B("FINEST",300),oa],qa=class{constructor(){this.I=0;this.clear()}clear(){this.aa=Array(this.I);this.ca=-1;this.fa=!1}},ra,ta=class{constructor(a,b,c){this.J=void 0;this.reset(a||C,b,c,void 0,void 0)}reset(a,b,c,
d,e){this.V=d||Date.now();this.N=a;this.wa=b;this.S=c;this.J=void 0;this.ya="number"===typeof e?e:sa}getMessage(){return this.wa}},sa=0,ua=function(a){return a.level?a.level:a.parent?ua(a.parent):C},va=class{constructor(a,b=null){this.level=null;this.j=[];this.parent=b||null;this.children=[];this.ia={C:()=>a}}publish(a){let b=this;for(;b;)b.j.forEach(c=>{c(a)}),b=b.parent}},G=function(a,b){var c=a.entries[b];if(c)return c;c=G(a,b.slice(0,Math.max(b.lastIndexOf("."),0)));const d=new va(b,c);a.entries[b]=
d;c.children.push(d);return d},wa=class{constructor(){this.entries={};const a=new va("");a.level=F;this.entries[""]=a}},xa,H=function(){xa||(xa=new wa);return xa},za=function(a){var b=ya;b&&G(H(),b.C()).j.push(a)},Aa=function(){var a=ya;a&&(G(H(),a.C()).level=oa)},I=function(a,b,c){var d;if(d=a)if(d=a&&b){d=b.value;var e=a?ua(G(H(),a.C())):C;d=d>=e.value}if(d){b=b||C;d=G(H(),a.C());"function"===typeof c&&(c=c());ra||(ra=new qa);e=ra;a=a.C();if(0<e.I){var f=(e.ca+1)%e.I;e.ca=f;e.fa?(e=e.aa[f],e.reset(b,
c,a),a=e):(e.fa=f==e.I-1,a=e.aa[f]=new ta(b,c,a))}else a=new ta(b,c,a);a.J=void 0;d.publish(a)}};function Ba(a,b,c){for(const d in a)b.call(c,a[d],d,a)}function Ca(a,b){for(const c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}const Da="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ea(a,b){let c,d;for(let e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(let f=0;f<Da.length;f++)c=Da[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function J(){var a=l.navigator;return a&&(a=a.userAgent)?a:""};var Fa=function(a){this.xa=a||"";A||(A=new z);this.Aa=A};h=Fa.prototype;h.Z=!0;h.T=!0;h.qa=!0;h.za=!0;h.pa=!1;h.ra=!1;var K=function(a){return 10>a?"0"+a:String(a)},Ga=function(a){Fa.call(this,a)};q(Ga,Fa);
var Ha=function(a,b){var c=[];c.push(a.xa," ");if(a.T){var d=new Date(b.V);c.push("[",K(d.getFullYear()-2E3)+K(d.getMonth()+1)+K(d.getDate())+" "+K(d.getHours())+":"+K(d.getMinutes())+":"+K(d.getSeconds())+"."+K(Math.floor(d.getMilliseconds()/10)),"] ")}if(a.qa){d=c.push;var e=a.Aa.get();e=(b.V-e)/1E3;var f=e.toFixed(3),g=0;if(1>e)g=2;else for(;100>e;)g++,e*=10;for(;0<g--;)f=" "+f;d.call(c,"[",f,"s] ")}a.za&&c.push("[",b.S,"] ");a.ra&&c.push("[",b.N.name,"] ");c.push(b.getMessage());a.pa&&(b=b.J,
void 0!==b&&c.push("\n",b instanceof Error?b.message:String(b)));a.Z&&c.push("\n");return c.join("")};function Ia(a=new Ga){a.T=!0;a.qa=!1;a.ra=!0}var La=class{constructor(a){this.name=a;this.target=G(H(),a).ia}log(a,b){I(this.target,null!=a?a:Ja,b)}error(a){I(this.target,D,a)}warn(a){I(this.target,E,a)}info(a){I(this.target,na,a)}debug(a){I(this.target,Ja,a)}trace(a){I(this.target,Ka,a)}},ya=G(H(),"").ia,Ja=new B("DEBUG",600),Ka=new B("TRACE",100);pa.push(Ja);pa.push(Ka);let Ma=void 0;var Na=function(a){return new Promise((b,c)=>{chrome.storage.local.set(a,()=>{const d=chrome.runtime.lastError;d?c(new w(5,u,d.message||"Call to c.s.l.set failed.")):b()})})},Oa=function(a){return new Promise((b,c)=>{chrome.storage.local.get(a,d=>{const e=chrome.runtime.lastError;e?c(new w(5,u,e.message||"Call to c.s.l.get failed.")):b(d)})})};
class Pa{set(a,b){return k(function*(){return Na({[a]:b})}())}get(a,b){return k(function*(){let c;return null!=(c=(yield Oa([a]))[a])?c:b}())}remove(a){return new Promise((b,c)=>{chrome.storage.local.remove(a,()=>{const d=chrome.runtime.lastError;d?c(new w(5,u,d.message||"Call to c.s.l.remove failed.")):b()})})}removeAll(a){return new Promise((b,c)=>{chrome.storage.local.remove(a,()=>{const d=chrome.runtime.lastError;d?c(new w(5,u,d.message||"Call to c.s.l.remove failed.")):b()})})}}var Qa=new Pa;const L=new La("EventManager");class Ra{constructor(a,b){this.initialize=a;this.i=b;this.ea=c=>{this.initialize("cookieChange").then(()=>this.i.publish(c))}}register(){chrome.cookies.onChanged.hasListeners()||chrome.cookies.onChanged.addListener(this.ea)}}
var Ta=function(){var a=Sa;chrome.runtime.onMessage.addListener((b,c,d)=>{a.i("onMessage").publish({message:b,sender:c,sendResponse:d});return!0});chrome.runtime.onConnect.addListener(b=>{a.i("onConnect").publish(b)})},Sa=new class{constructor(){this.events=new Map;this.da=!1}i(a){this.events.get(a)||this.events.set(a,new y);return this.events.get(a)}O(a){return this.i(a)}register(a){this.da?L.warn("Event registration is invoked again."):(this.da=!0,this.ba=new Ra(a,this.i("cookieChange")),this.ba.register(),
Qa.get("unsubscribeCookieChangeEvent").then(b=>{!0===b&&null!=(b=this.ba)&&chrome.cookies.onChanged.hasListeners()&&chrome.cookies.onChanged.removeListener(b.ea)}),chrome.gcm.onMessage.addListener(b=>{L.trace("Handling gcmMessage...");a("gcmMessage").then(()=>this.i("gcmMessage").publish(b))}),chrome.identity.onSignInChanged.addListener((b,c)=>{L.trace("Handling identitySigninChange...");a("identitySigninChange").then(()=>this.i("identitySigninChange").publish({account:b,Ca:c}))}),chrome.idle.onStateChanged.addListener(b=>
{L.trace("Handling onIdleStateChanged...");a("onIdleStateChanged").then(()=>this.i("onIdleStateChanged").publish(b))}),chrome.runtime.onMessage.addListener((b,c,d)=>{a("onMessage").then(()=>this.i("onMessage").publish({message:b,sender:c,sendResponse:d}));return!0}),chrome.runtime.onConnect.addListener(b=>{a("onConnect").then(()=>this.i("onConnect").publish(b))}),Ma||(Ma=chrome.runtime.getManifest()),3===Ma.manifest_version&&chrome.alarms.onAlarm.addListener(b=>{L.trace("Handling periodicSync...");
a("periodicSync").then(()=>{"SYNC_ALARM"===b.name&&this.i("periodicSync").publish()})}))}};function M(a){return a instanceof Error?a instanceof x?{type:3,errors:a.errors.map(M),message:a.message}:a instanceof w?{type:2,code:a.code,category:a.category.name,message:a.message}:{type:1,message:a.message||"Undefined error."}:{type:0,object:a}}function Ua(a){switch(a.type){case 0:return a.object;case 1:return Error(a.message);case 2:return new w(a.code,ka(a.category),a.message);case 3:return new x(a.errors.map(Ua),a.message)}};var Va=function(a,...b){return k(function*(){const c=new la;chrome.runtime.sendMessage({method:a,args:b},d=>{const e=chrome.runtime.lastError;e?c.reject(new w(1,u,`Operation '${String(a)}' failed. ${e.message||"Undefined error."}`)):d.error?c.reject(Ua(d.error)):c.resolve(d.output)});return c.promise}())},Wa=class{constructor(){this.events=new Map;this.na=new Map}};const N=new La("MessageServiceHost");
var Xa=function(a,b){N.debug("Registering 'fetch' handler.");a.j.set("fetch",b)},Ya=function(a,b,c){if(a.events.get(b))throw new w(416,t,"Event already exposed.");N.debug(`Exposing event '${b}'.`);const d={ports:[],R:!1,data:void 0};a.events.set(b,d);c.subscribe(e=>{d.data=e;if(!d.R){d.R=!0;try{for(const f of d.ports)try{f.postMessage(e)}catch(g){N.warn(`Post message to '${f.name}' failed. ${g.message}`)}}finally{d.R=!1}}})},$a=function(a,b){return Za(a,b.message,c=>{try{b.sendResponse(c)}catch(d){N.warn(`sendResponse failed. ${d.message}.`)}})},
ab=function(a,b){N.trace(`New connection to '${b.name}'.`);const c=a.events.get(b.name);if(c){var d=c.ports;d.push(b);b.onMessage.addListener(()=>{N.trace(`Data query for '${b.name}'.`);b.postMessage(c.data)});b.onDisconnect.addListener(e=>{e=d.indexOf(e);-1!==e&&(N.trace(`Port '${b.name}' disconnected.`),d.splice(e,1))})}else N.warn(`Connection attempt to not yet exposed event '${b.name}' is dropped.`),b.disconnect()},Za=function(a,b,c){const d=b.method;a=a.j.get(d);if(!a)return N.error(`No handler for method '${String(d)}'.`),
b={error:M(new w(1,t,`No handler for method '${String(d)}'.`))},c(b),!1;N.trace(`Handling '${String(d)}'...`);let e;try{const f=a(...b.args);if(f instanceof Promise)return bb(f,c),!0;e={output:f}}catch(f){e={error:M(f)}}c(e);return!1},bb=function(a,b){k(function*(){let c;try{c={output:yield a}}catch(d){c={error:M(d)}}b(c)}())},cb=class{constructor(){this.j=new Map;this.events=new Map;this.ga=!1}open(a){const b=this;return k(function*(){if(b.ga)throw new w(416,t,"Host is already open.");N.debug("Opening...");
Sa.O("onMessage").subscribe(c=>!a||(null==a?0:a.methods.includes(c.message.method))?$a(b,c):!1);Sa.O("onConnect").subscribe(c=>{(!a||(null==a?0:a.notifications.includes(c.name)))&&ab(b,c)});N.debug("Ready.");b.ga=!0}())}};var db=["fetch"],eb=["network:online","network:offline"];var fb=function(){p(this.Y,this);this.A=new Ga;this.A.T=!1;this.A.pa=!1;this.A.Z=!1;this.ua={}};fb.prototype.Y=function(a){function b(f){if(f){if(f.value>=D.value)return"error";if(f.value>=E.value)return"warn";if(f.value>=F.value)return"log"}return"debug"}if(!this.ua[a.S]){var c=Ha(this.A,a),d=gb;if(d){var e=b(a.N);hb(d,e,c,a.J)}}};var gb=l.console,hb=function(a,b,c,d){if(a[b])a[b](c,void 0===d?"":d);else a.log(c,void 0===d?"":d)};var ib=function(){};var O=function(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.F=!1};O.prototype.stopPropagation=function(){this.F=!0};O.prototype.preventDefault=function(){this.defaultPrevented=!0};var jb=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const c=()=>{};l.addEventListener("test",c,b);l.removeEventListener("test",c,b)}catch(c){}return a}();var kb=function(a){kb[" "](a);return a};kb[" "]=function(){};var lb=-1!=J().indexOf("Gecko")&&!(-1!=J().toLowerCase().indexOf("webkit")&&-1==J().indexOf("Edge"))&&!(-1!=J().indexOf("Trident")||-1!=J().indexOf("MSIE"))&&-1==J().indexOf("Edge"),mb=-1!=J().toLowerCase().indexOf("webkit")&&-1==J().indexOf("Edge");var P=function(a,b){O.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.pointerId=0;this.pointerType="";this.timeStamp=0;this.u=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;
this.currentTarget=b;if(b=a.relatedTarget){if(lb){a:{try{kb(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.offsetX=mb||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=mb||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?
a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:nb[a.pointerType]||"";this.state=a.state;this.timeStamp=a.timeStamp;this.u=
a;a.defaultPrevented&&P.U.preventDefault.call(this)}};q(P,O);var nb={2:"touch",3:"pen",4:"mouse"};P.prototype.stopPropagation=function(){P.U.stopPropagation.call(this);this.u.stopPropagation?this.u.stopPropagation():this.u.cancelBubble=!0};P.prototype.preventDefault=function(){P.U.preventDefault.call(this);var a=this.u;a.preventDefault?a.preventDefault():a.returnValue=!1};P.prototype.O=function(){return this.u};var ob="closure_listenable_"+(1E6*Math.random()|0),Q=function(a){return!(!a||!a[ob])};var pb=0;var qb=function(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.K=e;this.key=++pb;this.removed=this.H=!1},R=function(a){a.removed=!0;a.listener=null;a.proxy=null;a.src=null;a.K=null};var S=function(a){this.src=a;this.g={};this.G=0};S.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.G++);var g=rb(a,b,d,e);-1<g?(b=a[g],c||(b.H=!1)):(b=new qb(b,this.src,f,!!d,e),b.H=c,a.push(b));return b};S.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.g))return!1;var e=this.g[a];b=rb(e,b,c,d);return-1<b?(R(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.g[a],this.G--),!0):!1};
var sb=function(a,b){var c=b.type;if(c in a.g){var d=a.g[c],e=ma(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(R(b),0==a.g[c].length&&(delete a.g[c],a.G--))}};S.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],e=0;e<d.length;e++)++b,R(d[e]);delete this.g[c];this.G--}return b};S.prototype.B=function(a,b,c,d){a=this.g[a.toString()];var e=-1;a&&(e=rb(a,b,c,d));return-1<e?a[e]:null};
S.prototype.hasListener=function(a,b){var c=void 0!==a,d=c?a.toString():"",e=void 0!==b;return Ca(this.g,function(f){for(var g=0;g<f.length;++g)if(!(c&&f[g].type!=d||e&&f[g].capture!=b))return!0;return!1})};var rb=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.listener==b&&f.capture==!!c&&f.K==d)return e}return-1};var tb="closure_lm_"+(1E6*Math.random()|0),ub={},vb=0,xb=function(a,b,c,d,e){if(d&&d.once)return wb(a,b,c,d,e);if(Array.isArray(b)){for(var f=0;f<b.length;f++)xb(a,b[f],c,d,e);return null}c=T(c);return Q(a)?a.listen(b,c,m(d)?!!d.capture:!!d,e):yb(a,b,c,!1,d,e)},yb=function(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=m(e)?!!e.capture:!!e,n=U(a);n||(a[tb]=n=new S(a));c=n.add(b,c,d,g,f);if(c.proxy)return c;d=zb();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)jb||(e=g),void 0===
e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Ab(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");vb++;return c},zb=function(){const a=Bb,b=function(c){return a.call(b.src,b.listener,c)};return b},wb=function(a,b,c,d,e){if(Array.isArray(b)){for(var f=0;f<b.length;f++)wb(a,b[f],c,d,e);return null}c=T(c);return Q(a)?a.ha(b,c,m(d)?!!d.capture:!!d,e):yb(a,b,c,!0,d,e)},Cb=
function(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)Cb(a,b[f],c,d,e);else d=m(d)?!!d.capture:!!d,c=T(c),Q(a)?a.X(b,c,d,e):a&&(a=U(a))&&(b=a.B(b,c,d,e))&&V(b)},V=function(a){if("number"!==typeof a&&a&&!a.removed){var b=a.src;if(Q(b))sb(b.o,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(Ab(c),d):b.addListener&&b.removeListener&&b.removeListener(d);vb--;(c=U(b))?(sb(c,a),0==c.G&&(c.src=null,b[tb]=null)):R(a)}}},Ab=
function(a){return a in ub?ub[a]:ub[a]="on"+a},Bb=function(a,b){if(a.removed)a=!0;else{b=new P(b,this);var c=a.listener,d=a.K||a.src;a.H&&V(a);a=c.call(d,b)}return a},U=function(a){a=a[tb];return a instanceof S?a:null},Db="__closure_events_fn_"+(1E9*Math.random()>>>0),T=function(a){if("function"===typeof a)return a;a[Db]||(a[Db]=function(b){return a.handleEvent(b)});return a[Db]};var W=function(a){this.P=a;this.v={}};q(W,ib);var Eb=[];W.prototype.listen=function(a,b,c,d){Array.isArray(b)||(b&&(Eb[0]=b.toString()),b=Eb);for(var e=0;e<b.length;e++){var f=xb(a,b[e],c||this.handleEvent,d||!1,this.P||this);if(!f)break;this.v[f.key]=f}return this};W.prototype.ha=function(a,b,c,d){return Fb(this,a,b,c,d)};var Fb=function(a,b,c,d,e,f){if(Array.isArray(c))for(var g=0;g<c.length;g++)Fb(a,b,c[g],d,e,f);else{b=wb(b,c,d||a.handleEvent,e,f||a.P||a);if(!b)return a;a.v[b.key]=b}return a};
W.prototype.X=function(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)this.X(a,b[f],c,d,e);else c=c||this.handleEvent,d=m(d)?!!d.capture:!!d,e=e||this.P||this,c=T(c),d=!!d,b=Q(a)?a.B(b,c,d,e):a?(a=U(a))?a.B(b,c,d,e):null:null,b&&(V(b),delete this.v[b.key])};W.prototype.removeAll=function(){Ba(this.v,function(a,b){this.v.hasOwnProperty(b)&&V(a)},this);this.v={}};W.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var X=function(){this.o=new S(this);this.sa=this;this.ma=null};q(X,ib);X.prototype[ob]=!0;h=X.prototype;h.addEventListener=function(a,b,c,d){xb(this,a,b,c,d)};h.removeEventListener=function(a,b,c,d){Cb(this,a,b,c,d)};
h.dispatchEvent=function(a){var b=this.ma;if(b){var c=[];for(var d=1;b;b=b.ma)c.push(b),++d}b=this.sa;d=a.type||a;if("string"===typeof a)a=new O(a,b);else if(a instanceof O)a.target=a.target||b;else{var e=a;a=new O(d,b);Ea(a,e)}e=!0;if(c)for(var f=c.length-1;!a.F&&0<=f;f--){var g=a.currentTarget=c[f];e=Y(g,d,!0,a)&&e}a.F||(g=a.currentTarget=b,e=Y(g,d,!0,a)&&e,a.F||(e=Y(g,d,!1,a)&&e));if(c)for(f=0;!a.F&&f<c.length;f++)g=a.currentTarget=c[f],e=Y(g,d,!1,a)&&e;return e};
h.listen=function(a,b,c,d){return this.o.add(String(a),b,!1,c,d)};h.ha=function(a,b,c,d){return this.o.add(String(a),b,!0,c,d)};h.X=function(a,b,c,d){this.o.remove(String(a),b,c,d)};var Y=function(a,b,c,d){b=a.o.g[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.removed&&g.capture==c){var n=g.listener,Ib=g.K||g.src;g.H&&sb(a.o,g);e=!1!==n.call(Ib,d)&&e}}return e&&!d.defaultPrevented};X.prototype.B=function(a,b,c,d){return this.o.B(String(a),b,c,d)};
X.prototype.hasListener=function(a,b){return this.o.hasListener(void 0!==a?String(a):void 0,b)};var Gb=function(){X.call(this);this.ta=new W(this);this.ta.listen(l,["online","offline"],this.va)};q(Gb,X);Gb.prototype.va=function(){this.dispatchEvent(navigator.onLine?"online":"offline")};const Hb=function(){var a=new Wa,b="getAccounts hello getLogBuffer recordLog getQuirks updateQuirks uiEvent proxyUIEvent getProxyConfig".split(" ");for(const [d,e]of a.na){const f=d;var c=e;if(b.every(g=>f.has(g)))return c}c={};for(const d of b)Object.defineProperty(c,d,{value:(...e)=>Va(d,...e),writable:!1});a.na.set(new Set(b),c);return c}();
function Jb(){Aa();const a=new fb;Ia(a.A);za(c=>{const d=c.N;d&&d.value>=E.value&&a.Y(c)});let b=!1;za(c=>{if(!b){b=!0;try{var d=Hb.recordLog;var e={t:c.V,l:c.N.value,m:c.getMessage(),n:c.S,s:c.ya};d.call(Hb,e)}catch(f){}finally{b=!1}}})}const Z=new La("Offscreen Script");
var Kb=function(a){return k(function*(){var b=new Headers,c;for(const [e,f]of Object.entries(null!=(c=a.headers)?c:{}))b.set(e,f);a.request.headers=b;Z.debug(`Sending Fetch request to ${a.url}.`);let d;try{d=yield fetch(a.url,a.request)}catch(e){throw Z.debug(`Fetch request to ${a.url} failed. ${e.message}`),e;}b=yield d.text();Z.debug(`Fetch request to ${a.url} ${d.ok?"succeeded":"failed"}. Response: ${JSON.stringify(JSON.parse(b))}`);c={};for(const [e,f]of d.headers.entries())c[e]=f;return{ok:d.ok,
status:d.status,statusText:d.statusText,headers:c,text:b}}())};
class Lb{constructor(){this.host=new cb;this.la=new Gb;this.ka=new y;this.ja=new y}initialize(){const a=this;return k(function*(){Ta();const b=db.map(d=>d.toString()),c=eb.map(d=>d.toString());Ya(a.host,"network:online",a.ka);Ya(a.host,"network:offline",a.ja);Xa(a.host,d=>k(function*(){return Kb(d)}()));yield a.host.open({methods:b,notifications:c});a.la.listen("online",()=>{Z.debug("Online Event Received");a.ka.publish()});a.la.listen("offline",()=>{Z.debug("Offline Event Received");a.ja.publish()})}())}}
document.addEventListener("DOMContentLoaded",()=>{Jb();(new Lb).initialize()});
